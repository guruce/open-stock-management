CREATE TABLE cheque_payment (id BIGINT AUTO_INCREMENT, payment_id BIGINT NOT NULL, bank_name VARCHAR(255), status BIGINT, date_end DATETIME, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE client (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL UNIQUE, address VARCHAR(255), tp_hp BIGINT, tp_home BIGINT, notes VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE item (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, sales_unit_price FLOAT(18, 2), purchase_unit_price FLOAT(18, 2), description VARCHAR(255), stock_available BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE payment (id BIGINT AUTO_INCREMENT, amount FLOAT(18, 2), date DATETIME, type BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE purchase_items (id BIGINT AUTO_INCREMENT, purchase_order_id BIGINT, item_id BIGINT, nos BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX purchase_order_id_idx (purchase_order_id), INDEX item_id_idx (item_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE purchase_items_transport (id BIGINT AUTO_INCREMENT, purchase_item_id BIGINT NOT NULL, transport_id BIGINT NOT NULL, nos BIGINT, INDEX purchase_item_id_idx (purchase_item_id), INDEX transport_id_idx (transport_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE purchase_order (id BIGINT AUTO_INCREMENT, seller_id BIGINT NOT NULL, date_begin DATETIME NOT NULL, date_end DATETIME, total_price FLOAT(18, 2), total_paid FLOAT(18, 2), total_due FLOAT(18, 2), order_status BIGINT, notes VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX seller_id_idx (seller_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE purchase_payment (id BIGINT AUTO_INCREMENT, purchase_order_id BIGINT NOT NULL, payment_id BIGINT NOT NULL, INDEX purchase_order_id_idx (purchase_order_id), INDEX payment_id_idx (payment_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sales_items (id BIGINT AUTO_INCREMENT, sales_order_id BIGINT NOT NULL, item_id BIGINT NOT NULL, nos BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX sales_order_id_idx (sales_order_id), INDEX item_id_idx (item_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sales_items_transport (id BIGINT AUTO_INCREMENT, sales_item_id BIGINT NOT NULL, transport_id BIGINT NOT NULL, nos BIGINT, INDEX sales_item_id_idx (sales_item_id), INDEX transport_id_idx (transport_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sales_order (id BIGINT AUTO_INCREMENT, client_id BIGINT NOT NULL, date_begin DATETIME NOT NULL, date_end DATETIME, total_price FLOAT(18, 2), total_paid FLOAT(18, 2), total_due FLOAT(18, 2), order_status BIGINT, notes VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX client_id_idx (client_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sales_payment (id BIGINT AUTO_INCREMENT, sales_order_id BIGINT NOT NULL, payment_id BIGINT NOT NULL, INDEX sales_order_id_idx (sales_order_id), INDEX payment_id_idx (payment_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE seller (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL UNIQUE, address VARCHAR(255), tp_hp BIGINT, tp_home BIGINT, notes VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE transport (id BIGINT AUTO_INCREMENT, transporter_name BIGINT NOT NULL, date_begin DATETIME, date_end DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE transport_payment (id BIGINT AUTO_INCREMENT, transport_id BIGINT NOT NULL, payment_id BIGINT NOT NULL, INDEX transport_id_idx (transport_id), INDEX payment_id_idx (payment_id), PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE purchase_items ADD CONSTRAINT purchase_items_purchase_order_id_purchase_order_id FOREIGN KEY (purchase_order_id) REFERENCES purchase_order(id) ON DELETE CASCADE;
ALTER TABLE purchase_items ADD CONSTRAINT purchase_items_item_id_item_id FOREIGN KEY (item_id) REFERENCES item(id) ON DELETE CASCADE;
ALTER TABLE purchase_items_transport ADD CONSTRAINT purchase_items_transport_transport_id_transport_id FOREIGN KEY (transport_id) REFERENCES transport(id) ON DELETE CASCADE;
ALTER TABLE purchase_items_transport ADD CONSTRAINT purchase_items_transport_purchase_item_id_purchase_items_id FOREIGN KEY (purchase_item_id) REFERENCES purchase_items(id) ON DELETE CASCADE;
ALTER TABLE purchase_order ADD CONSTRAINT purchase_order_seller_id_seller_id FOREIGN KEY (seller_id) REFERENCES seller(id) ON DELETE CASCADE;
ALTER TABLE purchase_payment ADD CONSTRAINT purchase_payment_purchase_order_id_purchase_order_id FOREIGN KEY (purchase_order_id) REFERENCES purchase_order(id) ON DELETE CASCADE;
ALTER TABLE purchase_payment ADD CONSTRAINT purchase_payment_payment_id_payment_id FOREIGN KEY (payment_id) REFERENCES payment(id) ON DELETE CASCADE;
ALTER TABLE sales_items ADD CONSTRAINT sales_items_sales_order_id_sales_order_id FOREIGN KEY (sales_order_id) REFERENCES sales_order(id) ON DELETE CASCADE;
ALTER TABLE sales_items ADD CONSTRAINT sales_items_item_id_item_id FOREIGN KEY (item_id) REFERENCES item(id) ON DELETE CASCADE;
ALTER TABLE sales_items_transport ADD CONSTRAINT sales_items_transport_transport_id_transport_id FOREIGN KEY (transport_id) REFERENCES transport(id) ON DELETE CASCADE;
ALTER TABLE sales_items_transport ADD CONSTRAINT sales_items_transport_sales_item_id_sales_items_id FOREIGN KEY (sales_item_id) REFERENCES sales_items(id) ON DELETE CASCADE;
ALTER TABLE sales_order ADD CONSTRAINT sales_order_client_id_client_id FOREIGN KEY (client_id) REFERENCES client(id) ON DELETE CASCADE;
ALTER TABLE sales_payment ADD CONSTRAINT sales_payment_sales_order_id_sales_order_id FOREIGN KEY (sales_order_id) REFERENCES sales_order(id) ON DELETE CASCADE;
ALTER TABLE sales_payment ADD CONSTRAINT sales_payment_payment_id_payment_id FOREIGN KEY (payment_id) REFERENCES payment(id) ON DELETE CASCADE;
ALTER TABLE transport_payment ADD CONSTRAINT transport_payment_transport_id_transport_id FOREIGN KEY (transport_id) REFERENCES transport(id) ON DELETE CASCADE;
ALTER TABLE transport_payment ADD CONSTRAINT transport_payment_payment_id_payment_id FOREIGN KEY (payment_id) REFERENCES payment(id) ON DELETE CASCADE;
